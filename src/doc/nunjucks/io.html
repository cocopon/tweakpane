{% extends "_template.html" %}

{% set title = 'Import/Export' %}

{% block content %}
<p>You can export all properties to JSON by <code>getJson()</code>.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var ssFrom = Seasoner();
// ...
var json = ssFrom.getJson();
console.log(json);</code></pre>
	</div>
	<div class="codeBlock_section">
		<div class="twoColumnLayout">
			<div class="twoColumnLayout_leftColumn">
				<div id="exportExample" class="codeBlock_ssContainer"></div>
			</div>
			<div class="twoColumnLayout_rightColumn">
				<textarea id="exportArea" class="codeBlock_textBox" readOnly></textarea>
			</div>
		</div>
	</div>
</div>

<p>To import an exported JSON, pass it to <code>setJson()</code>.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var ssTo = Seasoner();
// ...
ssTo.setJson(json);</code></pre>
	</div>
	<div class="codeBlock_section">
		<div class="twoColumnLayout">
			<div class="twoColumnLayout_leftColumn">
				<textarea id="importArea" class="codeBlock_textBox" readOnly></textarea>
			</div>
			<div class="twoColumnLayout_rightColumn">
				<div id="importExample" class="codeBlock_ssContainer"></div>
			</div>
		</div>
	</div>
</div>


<h2>Changing a key of JSON variable</h2>
<p>Property name will be used as a key of JSON object by default, but you can change it by <code>id</code> option.</p>

<div class="codeBlock">
	<div class="codeBlock_section">
		<pre><code class="js">var ss = Seasoner();
ss.add(target, 'speed1');
ss.add(target, 'speed2', {
  id: 'initSpeed'
});</code></pre>
	</div>
	<div class="codeBlock_section">
		<div class="twoColumnLayout">
			<div class="twoColumnLayout_leftColumn">
				<div id="idExample" class="codeBlock_ssContainer"></div>
			</div>
			<div class="twoColumnLayout_rightColumn">
				<textarea id="idArea" class="codeBlock_textBox" readOnly></textarea>
			</div>
		</div>
	</div>
</div>

{% endblock %}

{% block script %}
function prettifyJson(json) {
	return JSON.stringify(json)
		.replace(/\{/g, '{\n  ')
		.replace(/,/g, ',\n  ')
		.replace(/\}/g, '\n}');
}

function showJson(json) {
	var jsonString = prettifyJson(json);
	document.getElementById('exportArea').textContent = jsonString;
	document.getElementById('importArea').textContent = jsonString;
}

(function() {
	var params = {
		color: '#f80',
		size: 10,
		speed: 1.0
	};
	var ss = Seasoner({
		container: document.getElementById('exportExample')
	});
	ss.add(params, 'color');
	ss.add(params, 'size', {min: 1, max: 100});
	ss.add(params, 'speed', {min: 0.0, max: 1.0});

	ss.on('change', function() {
		showJson(ss.getJson());
	});

	showJson(ss.getJson());
})();

(function() {
	var params = {
		color: '#08f',
		size: 20,
		speed: 0.5
	};
	var ss = Seasoner({
		container: document.getElementById('importExample')
	});
	ss.addButton('Import').on('click', function() {
		var json = JSON.parse(document.getElementById('importArea').textContent);
		ss.setJson(json);
	});
	ss.addSeparator();
	ss.add(params, 'color');
	ss.add(params, 'size', {min: 1, max: 100});
	ss.add(params, 'speed', {min: 0.0, max: 1.0});
})();

(function() {
	var params = {
		speed1: 0.3,
		speed2: 0.7
	};
	var ss = Seasoner({
		container: document.getElementById('idExample')
	});
	ss.add(params, 'speed1', {
		min: 0.0,
		max: 1.0
	});
	ss.add(params, 'speed2', {
		id: 'initSpeed',
		min: 0.0,
		max: 1.0
	});

	ss.on('change', function() {
		document.getElementById('idArea').textContent = prettifyJson(ss.getJson());
	});
	document.getElementById('idArea').textContent = prettifyJson(ss.getJson());
})();
{% endblock %}
