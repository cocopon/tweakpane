{% extends "_template.html" %}

{% set title = 'Events' %}

{% block content %}
<p>You can use <code>on()</code> of specific property to detect its changes.</p>
<p>
<code>'change'</code> event will be called continuously when the user controls a slider. If you want to detect a change just one time, use <code>'TODO'</code> event instead.
</p>

<div class="codeBlock">
	<div class="codeBlock_code">
		<pre><code class="js">var ss = Seasoner();
ss.add(target, 'someProperty', {min: 0, max: 100}).on(
  'change',
  function(value) {
    console.log(value);
  }
);</code></pre>
	</div>
	<div class="codeBlock_example">
		<div id="eventExample" class="codeBlock_ssContainer"></div>
	</div>
</div>

<div id="logWindow" class="log"></div>


<h2>Global event</h2>
<p>If you want to detect all changes, use <code>on()</code> of the root object.</p>

<div class="codeBlock">
	<div class="codeBlock_code">
		<pre><code class="js">var ss = Seasoner();
ss.add(target, 'someProperty', {min: 0, max: 100});
ss.on(
  'change',
  function(value, property) {
    console.log(property.getLabel());
    console.log(value);
  }
);</code></pre>
	</div>
	<div class="codeBlock_example">
		<div id="globalEventExample" class="codeBlock_ssContainer"></div>
	</div>
</div>

TODO: Log

<p>See <a href="TODO:path/to/property">Property</a> for the specification of <code>Property</code> class.</p>
{% endblock %}

{% block script %}
function appendLog(eventName, value) {
	const elem = document.getElementById('logWindow');
	elem.innerHTML = [
		eventName,
		': ',
		String(value),
		'<br>'
	].join('') + elem.innerHTML;
}

(function() {
	appendLog('', ')');

	var params = {
		someProperty: 50
	};
	var ss = Seasoner({
		container: document.getElementById('eventExample')
	});
	ss.add(params, 'someProperty', {
		min: 0,
		max: 100
	}).on(
		'change',
		function(value) {
			appendLog('change', value);
		}
	);
})();

(function() {
	appendLog('', ')');

	var params = {
		foo: 50,
		bar: 50
	};
	var ss = Seasoner({
		container: document.getElementById('globalEventExample')
	});
	ss.add(params, 'foo', {min: 0, max: 100});
	ss.add(params, 'bar', {min: 0, max: 100});
	ss.on('change', function(value, prop) {
	appendLog(
		'change(' + prop.getLabel() + ')',
		value
	);
	});
})();
{% endblock %}
